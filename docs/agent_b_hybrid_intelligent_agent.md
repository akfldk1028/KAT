# Agent B: Hybrid Intelligent Agent ê¸°íšì„œ
## AI ì¤‘ì‹¬ í”¼ì‹±/ì‚¬ê¸° íƒì§€ ì‹œìŠ¤í…œ

**ì‘ì„±ì¼**: 2025-12-07
**ë²„ì „**: Hybrid 1.0
**ëŒ€ìƒ**: AI ì—ì´ì „íŠ¸ ê²½ì§„ëŒ€íšŒ ì œì¶œìš©

---

## ğŸ“‹ ëª©ì°¨

1. [í•µì‹¬ ì² í•™](#í•µì‹¬-ì² í•™)
2. [ë¬¸ì œ ì •ì˜](#ë¬¸ì œ-ì •ì˜)
3. [Agentic AI ì„¤ê³„](#agentic-ai-ì„¤ê³„)
4. [Tool Use ì„¤ê³„](#tool-use-ì„¤ê³„)
5. [ê¸°ìˆ ì  íƒ€ë‹¹ì„±](#ê¸°ìˆ ì -íƒ€ë‹¹ì„±)
6. [ê²€ì¦ ë° ê±°ë²„ë„ŒìŠ¤](#ê²€ì¦-ë°-ê±°ë²„ë„ŒìŠ¤)
7. [Kanana í™œìš© ì „ëµ](#kanana-í™œìš©-ì „ëµ)
8. [ê¸°ëŒ€ íš¨ê³¼](#ê¸°ëŒ€-íš¨ê³¼)

---

## í•µì‹¬ ì² í•™

### AI Agentê°€ ì£¼ì¸ê³µ

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì „í†µì  ì‹œìŠ¤í…œ: Rule â†’ AI(ë³´ì¡°)
Hybrid Agent:  AI â†’ Rule(ë„êµ¬)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

**ì„¤ê³„ ì›ì¹™**:
1. **AIê°€ ì‚¬ê³ í•˜ê³  ê²°ì •í•œë‹¤**
   - Rule/DBëŠ” AIê°€ ì‚¬ìš©í•˜ëŠ” **ë„êµ¬**ì¼ ë¿
   - ìµœì¢… íŒë‹¨ì€ **Kanana Agentì˜ ì¶”ë¡ **

2. **ë„êµ¬ë¥¼ ë§¹ì‹ í•˜ì§€ ì•ŠëŠ”ë‹¤**
   - DB ì‹ ê³  ì´ë ¥ â†’ "ì°¸ê³  ìë£Œ" (ì ˆëŒ€ ì§„ë¦¬ ì•„ë‹˜)
   - ë² ì´ì¦ˆ í™•ë¥  â†’ "ì°¸ê³  ìˆ˜ì¹˜" (ë§¥ë½ì´ ìš°ì„ )

3. **ë§¥ë½ì„ ìµœìš°ì„ ìœ¼ë¡œ ê³ ë ¤**
   - 3ë…„ ëŒ€í™” ì´ë ¥ > DB ì‹ ê³  1ê±´
   - í‰ì†Œ í†¤ ì¼ê´€ì„± > íŒ¨í„´ ë§¤ì¹­ ê²°ê³¼

4. **ì„¤ëª… ê°€ëŠ¥í•œ ì¶”ë¡ **
   - "ì™œ ì´ë ‡ê²Œ íŒë‹¨í–ˆëŠ”ê°€" ì‚¬ìš©ìê°€ ì´í•´ ê°€ëŠ¥
   - ì¦ê±° â†’ ì¶”ë¡  ê³¼ì • â†’ ê²°ë¡  íˆ¬ëª…í•˜ê²Œ ì œì‹œ

---

## ë¬¸ì œ ì •ì˜

### ë°°ê²½

**ë©”ì‹ ì € í”¼ì‹±ì˜ ì§€ëŠ¥í™”**
- 2025ë…„ 1ë¶„ê¸° ë³´ì´ìŠ¤í”¼ì‹± í”¼í•´ì•¡: **3,116ì–µì›** (ì „ë…„ ëŒ€ë¹„ 2.2ë°° â†‘)
- KISA 2025 ì‚¬ì´ë²„ ìœ„í˜‘ 1ìˆœìœ„: **ìƒì„±í˜• AI í™œìš© ë³¸ê²©í™”**
- ê¸°ì¡´ í‚¤ì›Œë“œ í•„í„°ë§ í•œê³„: AI ìƒì„± ë©”ì‹œì§€ëŠ” ë¬¸ë²• ì˜¤ë¥˜ ì—†ê³  ë§¥ë½ ìì—°ìŠ¤ëŸ¬ì›€

### ëª©í‘œ

**ìˆ˜ì‹  ë©”ì‹œì§€ì˜ ì˜ë„ë¥¼ ì¶”ë¡ í•˜ê³  ëŠ¥ë™ì ìœ¼ë¡œ ì°¨ë‹¨í•˜ëŠ” Agentic AI**

### Agentic AI ì í•©ì„±

**ì™œ ììœ¨ì  í–‰ë™(Autonomy)ì´ í•„ìˆ˜ì¸ê°€?**

#### âŒ ë‹¨ìˆœ RAG/ì±—ë´‡ìœ¼ë¡œ ë¶ˆê°€ëŠ¥í•œ ì´ìœ 

**Case 1: Rule-based ì‹œìŠ¤í…œì˜ í•œê³„**
```python
# Rule-based ì ‘ê·¼
if "ê³„ì¢Œë²ˆí˜¸" in message and "ì†¡ê¸ˆ" in message:
    return "ì‚¬ê¸°"
```
- âŒ ì •ìƒ ë©”ì‹œì§€ë„ ì°¨ë‹¨: "ì•„ë¹  ì›”ê¸‰ ê³„ì¢Œë²ˆí˜¸ ì•Œë ¤ë“œë¦´ê²Œìš”. ì†¡ê¸ˆ í™•ì¸í•´ì£¼ì„¸ìš”"
- âŒ False Positive í­ì¦ â†’ ì‚¬ìš©ì ë¶ˆí¸

**Case 2: DB ì˜ì¡´ ì‹œìŠ¤í…œì˜ í•œê³„**
```python
if kisa_db.has_reported(url):
    return "CRITICAL"  # ë¬´ì¡°ê±´ ì°¨ë‹¨
```
- âŒ ì˜¤ë³´ ê°€ëŠ¥ì„± ë¬´ì‹œ: ì‹ ê³ ëœ ë²ˆí˜¸ê°€ ì¬í™œìš©ë˜ì–´ ì •ìƒ ì‚¬ìš©ìì—ê²Œ í• ë‹¹ë¨
- âŒ 5ë…„ ëŒ€í™” ì´ë ¥ ìˆëŠ” ê°€ì¡±ë„ ì°¨ë‹¨ â†’ ì‹ ë¢° í•˜ë½

**Case 3: ê³ ì • ML ëª¨ë¸ì˜ í•œê³„**
```python
# ì‚¬ì „ í•™ìŠµëœ ë¶„ë¥˜ ëª¨ë¸
category = model.predict(message)
if category == "A-1":  # ê°€ì¡± ì‚¬ì¹­
    return "CRITICAL"
```
- âŒ ë§¥ë½ ë¬´ì‹œ: A-1 íŒ¨í„´ì´ì–´ë„ ë°œì‹ ì ì‹ ë¢°ë„ ë†’ìœ¼ë©´ ì¡°ì • í•„ìš”
- âŒ ì‹ ê·œ ì‚¬ê¸° ìœ í˜• ëŒ€ì‘ ë¶ˆê°€: ì¬í•™ìŠµ ì „ê¹Œì§€ ë¬´ë°©ë¹„

#### âœ… Agentic AI í•„ìˆ˜ ìš”ì†Œ (ê²½ì§„ëŒ€íšŒ ì‹¬ì‚¬ ê¸°ì¤€)

**1. ììœ¨ì  ê³„íš ìˆ˜ë¦½ (Planning)**
```
ì‚¬ìš©ì ìš”ì²­: "ì´ ë©”ì‹œì§€ ì•ˆì „í•œê°€ìš”?"

Kanana Agentì˜ ê³„íš:
Step 1: ìµœê·¼ 10ê°œ ëŒ€í™” ë¶„ì„ â†’ ê´€ê³„ íŒŒì•…
Step 2: NERë¡œ ê³„ì¢Œë²ˆí˜¸/URL ì¶”ì¶œ
Step 3: KISA DB ì¡°íšŒ â†’ ì‹ ê³  ì´ë ¥ í™•ì¸
Step 4: ë°œì‹ ì ëŒ€í™” ì´ë ¥ ì¡°íšŒ â†’ ì‹ ë¢°ë„ ê³„ì‚°
Step 5: ìœ ì‚¬ ì‚¬ê¸° ì‚¬ë¡€ ê²€ìƒ‰ â†’ íŒ¨í„´ ë¹„êµ
Step 6: ëª¨ë“  ì¦ê±° ì¢…í•© â†’ ìµœì¢… íŒë‹¨
Step 7: ì‚¬ìš©ì ë§ì¶¤ ì„¤ëª… ìƒì„±
```
- âœ… AIê°€ **ìŠ¤ìŠ¤ë¡œ** í•„ìš”í•œ ë‹¨ê³„ ê²°ì •
- âœ… ìƒí™©ì— ë”°ë¼ ë„êµ¬ ì„ íƒ (Step 5 ìƒëµ ê°€ëŠ¥)

**2. ë„êµ¬ ììœ¨ ì‚¬ìš© (Tool Use)**
```python
# Kanana Agentê°€ í•„ìš”ì— ë”°ë¼ ë„êµ¬ ì„ íƒ
tools = [
    "ner_tool",           # ì •ë³´ ì¶”ì¶œ
    "kisa_db_tool",       # ì™¸ë¶€ DB ì¡°íšŒ
    "thecheat_db_tool",   # ì‚¬ê¸° ê³„ì¢Œ ì¡°íšŒ
    "conversation_tool",  # ëŒ€í™” ì´ë ¥
    "bayesian_tool",      # í™•ë¥  ê³„ì‚° (ì°¸ê³ ìš©)
    "rag_tool"            # ìœ ì‚¬ ì‚¬ë¡€ ê²€ìƒ‰
]

# AIê°€ ììœ¨ ì„ íƒ
if "URL" in extracted_entities:
    kisa_result = use_tool("kisa_db_tool", url)

if sender_is_new:
    # ì‹ ê·œ ë°œì‹ ì â†’ ì‚¬ê¸° ì‚¬ë¡€ ê²€ìƒ‰
    similar_cases = use_tool("rag_tool", message)
else:
    # ê¸°ì¡´ ë°œì‹ ì â†’ ëŒ€í™” ì´ë ¥ ë¶„ì„
    history = use_tool("conversation_tool", sender_id)
```
- âœ… ì¡°ê±´ë¶€ ë„êµ¬ ì„ íƒ (if-then ììœ¨ ê²°ì •)
- âœ… ë„êµ¬ ê²°ê³¼ë¥¼ **ë¹„íŒì ìœ¼ë¡œ í•´ì„**

**3. ë§¥ë½ ê¸°ë°˜ í–‰ë™ (Action)**
```python
# ë™ì¼ A-1 íŒ¨í„´ë„ ë§¥ë½ì— ë”°ë¼ ë‹¤ë¥¸ í–‰ë™
if category == "A-1" and sender_trust > 0.8:
    action = "ê²½ê³  + í™•ì¸ ê¶Œì¥"  # ì°¨ë‹¨ X
    reasoning = "ê°€ì¡± ì‚¬ì¹­ íŒ¨í„´ì´ì§€ë§Œ 3ë…„ ì´ë ¥ ì¡´ì¬"
elif category == "A-1" and db_reported:
    action = "ê°•ë ¥ ê²½ê³  + ì°¨ë‹¨ ê¶Œì¥"
    reasoning = "DB ì‹ ê³  + ê°€ì¡± ì‚¬ì¹­ íŒ¨í„´"
```
- âœ… Rule ê¸°ë°˜ ê³ ì • í–‰ë™ âŒ
- âœ… ë§¥ë½ ê¸°ë°˜ ë™ì  í–‰ë™ âœ…

---

## Agentic AI ì„¤ê³„

### ì•„í‚¤í…ì²˜ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Kanana LLM Agent (Brain)             â”‚
â”‚                                              â”‚
â”‚  - ReAct Pattern (Reasoning + Action)        â”‚
â”‚  - ë§¥ë½ ì´í•´ (ìµœê·¼ 10ê°œ ëŒ€í™”)                 â”‚
â”‚  - ë„êµ¬ ììœ¨ ì„ íƒ ë° ì‹¤í–‰                     â”‚
â”‚  - ì¦ê±° ë¹„íŒì  í•´ì„                          â”‚
â”‚  - ì¢…í•© íŒë‹¨ ë° ì„¤ëª… ìƒì„±                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â†“           â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚MCP Toolsâ”‚ â”‚MCP Toolsâ”‚   â”‚MCP Tools â”‚
â”‚         â”‚ â”‚         â”‚   â”‚          â”‚
â”‚Context  â”‚ â”‚Threat   â”‚   â”‚Social    â”‚
â”‚Analyzer â”‚ â”‚Intel    â”‚   â”‚Graph     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“           â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚NER      â”‚ â”‚KISA DB  â”‚   â”‚ëŒ€í™” ì´ë ¥ â”‚
â”‚ì •ê·œì‹   â”‚ â”‚TheCheat â”‚   â”‚ì‹ ë¢°ë„    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**í•µì‹¬ ì°¨ì´ì **:
- ê¸°ì¡´: MCPê°€ ê³ ì • ìˆœì„œë¡œ ì‹¤í–‰ (íŒŒì´í”„ë¼ì¸)
- ì œì•ˆ: **Kananaê°€ í•„ìš”ì— ë”°ë¼ MCP ë„êµ¬ ì„ íƒ** (ììœ¨)

### ReAct Pattern ì ìš©

**ReAct = Reasoning (ì¶”ë¡ ) + Action (í–‰ë™) ë°˜ë³µ**

```
ì‚¬ìš©ì: "ì—„ë§ˆ, ë‚˜ í° ê³ ì¥ë‚˜ì„œ ë²ˆí˜¸ ë°”ë€Œì—ˆì–´ 010-1234-5678"

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Cycle 1: Reasoning
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Kanana ì‚¬ê³ :
"ì´ ë©”ì‹œì§€ëŠ” ê°€ì¡± ì‚¬ì¹­ íŒ¨í„´(A-1)ì¼ ê°€ëŠ¥ì„±ì´ ìˆë‹¤.
í•˜ì§€ë§Œ ë°œì‹ ìê°€ ëˆ„êµ¬ì¸ì§€ ë¨¼ì € í™•ì¸í•´ì•¼ í•œë‹¤."

Action: conversation_tool(sender_id)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Observation:
{
  "conversation_history": "5ë…„, 3,421ê±´",
  "last_contact": "2025-12-06",
  "tone_consistency": 0.95
}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Cycle 2: Reasoning
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Kanana ì‚¬ê³ :
"5ë…„ ëŒ€í™” ì´ë ¥ + ì–´ì œê¹Œì§€ ì •ìƒ ëŒ€í™” = ì‹ ë¢°ë„ ë†’ìŒ.
ê·¸ëŸ°ë° ë²ˆí˜¸ê°€ ì •ë§ ë°”ë€Œì—ˆëŠ”ì§€ DB í™•ì¸ í•„ìš”."

Action: thecheat_db_tool("010-1234-5678")
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Observation:
{
  "has_reported": true,
  "report_date": "2024-11-15",
  "report_type": "ê³„ì¢Œë²ˆí˜¸ ì‚¬ê¸°"
}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Cycle 3: Reasoning
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Kanana ì‚¬ê³ :
"DBì— ì‹ ê³  ì´ë ¥ ìˆìŒ â†’ ì¼ë°˜ì ìœ¼ë¡œ CRITICAL
í•˜ì§€ë§Œ 5ë…„ ì´ë ¥ + í‰ì†Œ í†¤ ì¼ê´€ì„± ê³ ë ¤ ì‹œ,
ë²ˆí˜¸ ì¬í™œìš© ê°€ëŠ¥ì„± ë˜ëŠ” ì˜¤ë³´ ê°€ëŠ¥ì„± ë†’ìŒ.

ìœ ì‚¬ ì‚¬ë¡€ë¥¼ ê²€ìƒ‰í•´ë³´ì."

Action: rag_tool("ë²ˆí˜¸ ë³€ê²½ + 5ë…„ ëŒ€í™”")
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Observation:
{
  "similar_cases": [
    {"case": "ì •ìƒ ë²ˆí˜¸ ë³€ê²½", "similarity": 0.87},
    {"case": "ê°€ì¡± ì‚¬ì¹­ ì‚¬ê¸°", "similarity": 0.72}
  ]
}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Final Reasoning & Decision
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Kanana ìµœì¢… íŒë‹¨:
"ì¦ê±° ì¢…í•©:
1. A-1 íŒ¨í„´ ë§¤ì¹­ (ê°€ì¡± ì‚¬ì¹­)
2. DB ì‹ ê³  ì´ë ¥ ìˆìŒ (CRITICAL ìš”ì†Œ)
3. í•˜ì§€ë§Œ 5ë…„ ëŒ€í™” ì´ë ¥ (ì‹ ë¢°ë„ ë§¤ìš° ë†’ìŒ)
4. ìœ ì‚¬ ì •ìƒ ì‚¬ë¡€ 87% ì¼ì¹˜

ê²°ë¡ :
- DB ì‹ ê³ ëŠ” ë²ˆí˜¸ ì¬í™œìš©ìœ¼ë¡œ ì¸í•œ ì˜¤ë³´ ê°€ëŠ¥ì„±
- ë°œì‹ ìëŠ” ì‹¤ì œ ê°€ì¡±ì¼ í™•ë¥  ë†’ìŒ
- ìµœì¢… ìœ„í—˜ë„: HIGH (CRITICALì—ì„œ í•˜í–¥)
- ê¶Œì¥ ì¡°ì¹˜: ìƒˆ ë²ˆí˜¸ë¡œ ì§ì ‘ ì „í™” í™•ì¸"

Output:
{
  "category": "A-1",
  "base_risk": "CRITICAL",
  "final_risk": "HIGH",
  "confidence": 0.82,
  "reasoning": "ê°€ì¡± ì‚¬ì¹­ íŒ¨í„´ + DB ì‹ ê³  ì´ë ¥ ìˆìœ¼ë‚˜, 5ë…„ ëŒ€í™” ì´ë ¥(3,421ê±´)ê³¼ í‰ì†Œ í†¤ ì¼ê´€ì„±(95%) ê³ ë ¤ ì‹œ ë²ˆí˜¸ ì¬í™œìš© ê°€ëŠ¥ì„±. ìƒˆ ë²ˆí˜¸ë¡œ ì§ì ‘ í†µí™” ê¶Œì¥."
}
```

**í•µì‹¬**: Rule/DBë¥¼ ë§¹ì‹ í•˜ì§€ ì•Šê³ , **AIê°€ ë§¥ë½ì„ ê³ ë ¤í•˜ì—¬ ìµœì¢… íŒë‹¨**

---

## Tool Use ì„¤ê³„

### MCP Tool ëª©ë¡

#### 1. Context Analyzer MCP

**ì—­í• **: ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ ë° íŒ¨í„´ ì¸ì‹

**Input**:
```python
{
  "current_message": "ì—„ë§ˆ, ë‚˜ í° ê³ ì¥ë‚˜ì„œ...",
  "recent_messages": [...ìµœê·¼ 10ê°œ],
  "task": "classify_category"
}
```

**Output**:
```python
{
  "category": "A-1",
  "confidence": 0.87,
  "matched_patterns": ["ê¸´ê¸‰ì„±", "ê¸ˆì „ ìš”êµ¬", "ì „í™” íšŒí”¼"],
  "reasoning": "ê°€ì¡± í˜¸ì¹­ + í•¸ë“œí° ê³ ì¥ í•‘ê³„ â†’ A-1 ì „í˜• íŒ¨í„´"
}
```

**I/O ìƒì„¸**:
- Input Type: `{"message": str, "context": List[str]}`
- Output Type: `{"category": str, "confidence": float, "patterns": List[str]}`
- Error Handling: confidence < 0.3 â†’ "D-N" (ë¶ˆëª…í™•) ë°˜í™˜

---

#### 2. Entity Extractor MCP

**ì—­í• **: NER (Named Entity Recognition)

**Input**:
```python
{
  "text": "010-1234-5678ë¡œ 300ë§Œì› ë³´ë‚´ì£¼ì„¸ìš” http://bit.ly/xxx",
  "extract_types": ["phone", "money", "url", "account"]
}
```

**Output**:
```python
{
  "entities": {
    "phone_numbers": ["010-1234-5678"],
    "amounts": ["300ë§Œì›"],
    "urls": ["http://bit.ly/xxx"],
    "account_numbers": []
  }
}
```

**I/O ìƒì„¸**:
- Input Type: `{"text": str, "extract_types": List[str]}`
- Output Type: `{"entities": Dict[str, List[str]]}`
- ê¸°ìˆ : ì •ê·œì‹ (80%) + Kanana NER (20%)

---

#### 3. Threat Intelligence MCP

**ì—­í• **: ì™¸ë¶€ DB ì¡°íšŒ (KISA, TheCheat)

**Sub-tool 1: KISA Phishing URL DB**
```python
# Input
{"url": "http://bit.ly/xxx"}

# Output
{
  "has_reported": true,
  "report_date": "2024-12-01",
  "report_type": "í”¼ì‹± ì‚¬ì´íŠ¸",
  "report_count": 12
}
```

**Sub-tool 2: TheCheat ì‚¬ê¸° ì‹ ê³  DB**
```python
# Input
{"account_number": "110-123-456789"}

# Output
{
  "has_reported": false,
  "similar_patterns": ["110-123-*"]  # ìœ ì‚¬ íŒ¨í„´
}
```

**I/O ìƒì„¸**:
- Input Type: `{"identifier": str, "type": "url"|"account"|"phone"}`
- Output Type: `{"has_reported": bool, "details": Dict}`
- Error Handling: API íƒ€ì„ì•„ì›ƒ â†’ `{"has_reported": false, "note": "API ì˜¤ë¥˜"}`

---

#### 4. Social Graph MCP

**ì—­í• **: ë°œì‹ ì ì‹ ë¢°ë„ ë¶„ì„ (Kanana ê¸°ë°˜)

**Input**:
```python
{
  "sender_id": "user_12345",
  "current_message": "...",
  "analysis_type": "trust_score"
}
```

**Output**:
```python
{
  "trust_level": "high",
  "trust_score": 0.82,
  "factors": {
    "conversation_duration": "5 years",
    "message_count": 3421,
    "tone_consistency": 0.95,
    "last_contact": "2025-12-06",
    "sudden_change": false
  },
  "reasoning": "ì¥ê¸° ëŒ€í™” ì´ë ¥ + í‰ì†Œ í†¤ ì¼ê´€ì„±"
}
```

**I/O ìƒì„¸**:
- Input Type: `{"sender_id": str, "message": str}`
- Output Type: `{"trust_score": float, "factors": Dict, "reasoning": str}`
- ê¸°ìˆ : Kanana LLM ë§¥ë½ ë¶„ì„

---

#### 5. Bayesian Calculator MCP (ì°¸ê³ ìš©)

**ì—­í• **: í™•ë¥  ê³„ì‚° **ë³´ì¡° ë„êµ¬** (ìµœì¢… íŒë‹¨ì€ AIê°€ ìˆ˜í–‰)

**Input**:
```python
{
  "category": "A-1",
  "evidence": {
    "db_reported": false,
    "sender_trust": 0.82,
    "time_risk": 0.1,
    "urgency": 0.8
  }
}
```

**Output**:
```python
{
  "posterior_probability": 0.65,
  "note": "ì°¸ê³ ìš© í™•ë¥ ê°’, ìµœì¢… íŒë‹¨ì€ Kanana Agentê°€ ìˆ˜í–‰"
}
```

**I/O ìƒì„¸**:
- Input Type: `{"category": str, "evidence": Dict[str, float]}`
- Output Type: `{"probability": float}`
- **ì¤‘ìš”**: AIê°€ ì´ ê°’ì„ ì°¸ê³ ë§Œ í•˜ê³ , ë§¥ë½ ê³ ë ¤í•˜ì—¬ ì¡°ì •

---

#### 6. Scam Case RAG MCP

**ì—­í• **: ìœ ì‚¬ ì‚¬ê¸° ì‚¬ë¡€ ê²€ìƒ‰

**Input**:
```python
{
  "query": "ê°€ì¡± ì‚¬ì¹­ + ë²ˆí˜¸ ë³€ê²½",
  "top_k": 5
}
```

**Output**:
```python
{
  "similar_cases": [
    {
      "case_id": "case_001",
      "description": "ì‹¤ì œ ê°€ì¡±ì˜ ë²ˆí˜¸ ë³€ê²½",
      "category": "ì •ìƒ",
      "similarity": 0.87
    },
    {
      "case_id": "case_042",
      "description": "ê°€ì¡± ì‚¬ì¹­ ì‚¬ê¸°",
      "category": "A-1",
      "similarity": 0.72
    }
  ]
}
```

**I/O ìƒì„¸**:
- Input Type: `{"query": str, "top_k": int}`
- Output Type: `{"cases": List[Dict]}`
- ê¸°ìˆ : Vector DB (Embeddings) + Semantic Search

---

### Tool ì„ íƒ ë¡œì§ (Kanana Agentê°€ ììœ¨ ê²°ì •)

```python
# Kanana Agentì˜ ë„êµ¬ ì„ íƒ í”„ë¡¬í”„íŠ¸
tool_selection_prompt = """
ë‹¹ì‹ ì€ í”¼ì‹± íƒì§€ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ìƒí™©ì— ë§ëŠ” ë„êµ¬ë¥¼ ì„ íƒí•˜ì„¸ìš”.

ì‚¬ìš© ê°€ëŠ¥í•œ ë„êµ¬:
1. context_analyzer_mcp: ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜
2. entity_extractor_mcp: NER (ê³„ì¢Œë²ˆí˜¸, URL ë“± ì¶”ì¶œ)
3. threat_intelligence_mcp: KISA/TheCheat DB ì¡°íšŒ
4. social_graph_mcp: ë°œì‹ ì ì‹ ë¢°ë„ ë¶„ì„
5. bayesian_calculator_mcp: í™•ë¥  ê³„ì‚° (ì°¸ê³ ìš©)
6. scam_case_rag_mcp: ìœ ì‚¬ ì‚¬ë¡€ ê²€ìƒ‰

ë„êµ¬ ì„ íƒ ê°€ì´ë“œ:
- URL/ê³„ì¢Œë²ˆí˜¸ ìˆìœ¼ë©´ â†’ entity_extractor_mcp + threat_intelligence_mcp
- ë°œì‹ ì ì²˜ìŒ ë³´ë©´ â†’ scam_case_rag_mcp
- ë°œì‹ ì ê¸°ì¡´ ê´€ê³„ â†’ social_graph_mcp
- í™•ë¥  ê³„ì‚° í•„ìš” ì‹œ â†’ bayesian_calculator_mcp (ì„ íƒì‚¬í•­)

ì¤‘ìš”: ë¶ˆí•„ìš”í•œ ë„êµ¬ í˜¸ì¶œ ì§€ì–‘, íš¨ìœ¨ì„± ê³ ë ¤
"""
```

**ì‹¤ì œ ë™ì‘ ì˜ˆì‹œ**:

```python
# Case 1: ì‹ ê·œ ë°œì‹ ì + URL
message = "íƒë°° ì¡°íšŒ http://bit.ly/xxx"

Kanana íŒë‹¨:
â†’ entity_extractor_mcp (URL ì¶”ì¶œ)
â†’ threat_intelligence_mcp (KISA DB ì¡°íšŒ)
â†’ scam_case_rag_mcp (ìœ ì‚¬ ì‚¬ë¡€)
âœ— social_graph_mcp (ì‹ ê·œ ë°œì‹ ìë¼ ë¶ˆí•„ìš”)

# Case 2: ê¸°ì¡´ ë°œì‹ ì + ê¸ˆì „ ìš”êµ¬
message = "ì—„ë§ˆ ê¸‰í•˜ê²Œ ëˆ ì¢€..."

Kanana íŒë‹¨:
â†’ context_analyzer_mcp (A-1 íŒ¨í„´ í™•ì¸)
â†’ social_graph_mcp (ë°œì‹ ì ì‹ ë¢°ë„)
â†’ scam_case_rag_mcp (ìœ ì‚¬ ì •ìƒ ì‚¬ë¡€ í™•ì¸)
âœ— entity_extractor_mcp (ê³„ì¢Œë²ˆí˜¸ ì—†ìŒ)
âœ— threat_intelligence_mcp (DB ì¡°íšŒ ë¶ˆí•„ìš”)
```

---

## ê¸°ìˆ ì  íƒ€ë‹¹ì„±

### Kanana Agent Prompt ì„¤ê³„

```python
KANANA_AGENT_SYSTEM_PROMPT = """
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì—­í• : í”¼ì‹±/ì‚¬ê¸° íƒì§€ ì „ë¬¸ AI Agent
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ë‹¹ì‹ ì€ Hybrid Intelligent Agentì…ë‹ˆë‹¤.
Ruleê³¼ DBëŠ” ë„êµ¬ì¼ ë¿, ìµœì¢… íŒë‹¨ì€ ë‹¹ì‹ ì´ í•©ë‹ˆë‹¤.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
í•µì‹¬ ì›ì¹™
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. ë§¥ë½ ìš°ì„  (Context First)
   - 5ë…„ ëŒ€í™” ì´ë ¥ > DB ì‹ ê³  1ê±´
   - í‰ì†Œ í†¤ ì¼ê´€ì„± > íŒ¨í„´ ë§¤ì¹­

2. ë¹„íŒì  ì‚¬ê³  (Critical Thinking)
   - DB ì‹ ê³  = ì ˆëŒ€ ì§„ë¦¬ ì•„ë‹˜ (ì˜¤ë³´ ê°€ëŠ¥ì„±)
   - ë² ì´ì¦ˆ í™•ë¥  = ì°¸ê³ ê°’ (ë§¥ë½ìœ¼ë¡œ ì¡°ì •)

3. ë³´ìˆ˜ì  íŒë‹¨ (Conservative)
   - ë¶ˆí™•ì‹¤í•˜ë©´ MEDIUM + ì‚¬ìš©ì í™•ì¸ ìš”ì²­
   - í™•ì‹  ì—†ìœ¼ë©´ ì°¨ë‹¨ë³´ë‹¤ ê²½ê³ 

4. ì„¤ëª… ê°€ëŠ¥ì„± (Explainability)
   - ëª¨ë“  íŒë‹¨ì— ê·¼ê±° ì œì‹œ
   - ì‚¬ìš©ìê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” ì–¸ì–´

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ReAct Pattern (Reasoning + Action)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Step 1: Reasoning (ì¶”ë¡ )
  - í˜„ì¬ ìƒí™© ë¶„ì„
  - í•„ìš”í•œ ì •ë³´ íŒŒì•…
  - ë„êµ¬ ì„ íƒ ê³„íš

Step 2: Action (í–‰ë™)
  - ë„êµ¬ ì‹¤í–‰
  - ê²°ê³¼ ìˆ˜ì§‘

Step 3: Observation (ê´€ì°°)
  - ë„êµ¬ ê²°ê³¼ í•´ì„
  - ì¶”ê°€ ì •ë³´ í•„ìš”ì„± íŒë‹¨

Step 4: Loop or Decide
  - ë” í•„ìš”í•˜ë©´ Step 1ë¡œ
  - ì¶©ë¶„í•˜ë©´ ìµœì¢… íŒë‹¨

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì‚¬ìš© ê°€ëŠ¥í•œ ë„êµ¬
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. context_analyzer_mcp(message, context)
   â†’ ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ (A-1 ~ C-3, D-N, NORMAL)

2. entity_extractor_mcp(text)
   â†’ NER (URL, ê³„ì¢Œë²ˆí˜¸, ì „í™”ë²ˆí˜¸, ê¸ˆì•¡)

3. threat_intelligence_mcp(identifier, type)
   â†’ KISA/TheCheat DB ì¡°íšŒ

4. social_graph_mcp(sender_id)
   â†’ ë°œì‹ ì ì‹ ë¢°ë„ ë¶„ì„

5. bayesian_calculator_mcp(category, evidence)
   â†’ í™•ë¥  ê³„ì‚° (ì°¸ê³ ìš©)

6. scam_case_rag_mcp(query)
   â†’ ìœ ì‚¬ ì‚¬ë¡€ ê²€ìƒ‰

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
íŒë‹¨ í”„ë ˆì„ì›Œí¬
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ìœ„í—˜ë„ ê²°ì • ì‹œ ê³ ë ¤ì‚¬í•­ (ìš°ì„ ìˆœìœ„ ìˆœ):

1. ë°œì‹ ì ê´€ê³„ (Weight: 0.4)
   - ëŒ€í™” ì´ë ¥ 5ë…„+ â†’ ì‹ ë¢°ë„ +40%
   - ì²˜ìŒ ë³´ëŠ” ë²ˆí˜¸ â†’ ìœ„í—˜ë„ +30%

2. ë§¥ë½ ì¼ê´€ì„± (Weight: 0.3)
   - í‰ì†Œ í†¤ê³¼ ì¼ì¹˜ â†’ ì‹ ë¢°ë„ +30%
   - ê°‘ì‘ìŠ¤ëŸ¬ìš´ ë³€í™” â†’ ìœ„í—˜ë„ +25%

3. ì™¸ë¶€ ì¦ê±° (Weight: 0.2)
   - DB ì‹ ê³  ì´ë ¥ â†’ ìœ„í—˜ë„ +20% (ì ˆëŒ€ê°’ ì•„ë‹˜!)
   - ìœ ì‚¬ ì‚¬ê¸° ì‚¬ë¡€ â†’ ìœ„í—˜ë„ +15%

4. íŒ¨í„´ ë§¤ì¹­ (Weight: 0.1)
   - A-1, C-2, C-3 â†’ ìœ„í—˜ë„ +10%
   - B-3, C-1 â†’ ìœ„í—˜ë„ +5%

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì¶œë ¥ í˜•ì‹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

{
  "category": "A-1",
  "base_risk": "CRITICAL",
  "final_risk": "HIGH",
  "confidence": 0.82,
  "reasoning": "ê°€ì¡± ì‚¬ì¹­ íŒ¨í„´ì´ì§€ë§Œ 5ë…„ ëŒ€í™” ì´ë ¥ ê³ ë ¤í•˜ì—¬ ì¡°ì •",
  "evidence": {
    "db_reported": true,
    "sender_trust": 0.85,
    "tone_consistency": 0.95,
    "similar_scam_cases": 2,
    "similar_normal_cases": 8
  },
  "decision_process": [
    "Step 1: A-1 íŒ¨í„´ ê°ì§€ (ê°€ì¡± ì‚¬ì¹­)",
    "Step 2: ë°œì‹ ì 5ë…„ ì´ë ¥ í™•ì¸ (ì‹ ë¢°ë„ ë†’ìŒ)",
    "Step 3: DB ì‹ ê³  ìˆìœ¼ë‚˜ ë²ˆí˜¸ ì¬í™œìš© ê°€ëŠ¥ì„±",
    "Step 4: ìœ ì‚¬ ì •ìƒ ì‚¬ë¡€ 8ê±´ > ì‚¬ê¸° ì‚¬ë¡€ 2ê±´",
    "Step 5: CRITICAL â†’ HIGH ì¡°ì •"
  ],
  "recommended_action": "ìƒˆ ë²ˆí˜¸ë¡œ ì§ì ‘ ì „í™” í™•ì¸"
}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì˜ˆì‹œ ì‹œë‚˜ë¦¬ì˜¤
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ì‹œë‚˜ë¦¬ì˜¤ 1: DB ì‹ ê³  ìˆì§€ë§Œ ì˜¤ë³´ì¸ ê²½ìš°
ë©”ì‹œì§€: "ì—„ë§ˆ ë²ˆí˜¸ ë°”ë€Œì—ˆì–´ 010-1234-5678"
íŒë‹¨: HIGH (CRITICAL ì•„ë‹˜)
ì´ìœ : DB ì‹ ê³  ìˆìœ¼ë‚˜ 5ë…„ ì´ë ¥ + ë²ˆí˜¸ ì¬í™œìš© ê°€ëŠ¥ì„±

ì‹œë‚˜ë¦¬ì˜¤ 2: ë² ì´ì¦ˆ í™•ë¥  ë‚®ì§€ë§Œ ìœ„í—˜í•œ ê²½ìš°
ë©”ì‹œì§€: "ì•ˆë…•í•˜ì„¸ìš” íˆ¬ì ìƒë‹´ ë°›ì•„ë³´ì‹¤ë˜ìš”?"
íŒë‹¨: HIGH (MEDIUM ì•„ë‹˜)
ì´ìœ : í™•ë¥  0.35ì´ë‚˜ ë§¥ë½ìƒ ì „í˜•ì  ì‚¬ê¸° ì´ˆê¸° ì ‘ê·¼

ì‹œë‚˜ë¦¬ì˜¤ 3: íŒ¨í„´ ì¼ì¹˜í•˜ì§€ë§Œ ì •ìƒì¸ ê²½ìš°
ë©”ì‹œì§€: "ì•„ë¹  ì›”ê¸‰ ê³„ì¢Œë²ˆí˜¸ 110-123-456789ì˜ˆìš”"
íŒë‹¨: SAFE (LOW ì•„ë‹˜)
ì´ìœ : ê³„ì¢Œë²ˆí˜¸ í¬í•¨ì´ë‚˜ ì¼ìƒì  ì •ë³´ ê³µìœ  ë§¥ë½
"""
```

---

### êµ¬í˜„ ê°€ëŠ¥ì„±

#### ê¸°ìˆ  ìŠ¤íƒ

| ê³„ì¸µ | ê¸°ìˆ  | ë¹„ê³  |
|------|------|------|
| **LLM** | Kanana 2.0 | ì˜¨ë””ë°”ì´ìŠ¤ + ì„œë²„ í•˜ì´ë¸Œë¦¬ë“œ |
| **Agent Framework** | LangChain / Custom | ReAct íŒ¨í„´ êµ¬í˜„ |
| **MCP Protocol** | FastAPI | Tool ì¸í„°í˜ì´ìŠ¤ |
| **Vector DB** | Chroma / Pinecone | RAG ìœ ì‚¬ ì‚¬ë¡€ ê²€ìƒ‰ |
| **External API** | KISA, TheCheat | DB ì¡°íšŒ |

#### ê°œë°œ ì¼ì • (ì´ 3ì£¼)

**Week 1: Agent Core**
- Day 1-2: Kanana Agent Prompt ì„¤ê³„
- Day 3-4: ReAct Loop êµ¬í˜„
- Day 5-7: Tool Selection Logic

**Week 2: MCP Tools**
- Day 1-2: Context Analyzer MCP
- Day 3-4: Threat Intelligence MCP
- Day 5: Social Graph MCP
- Day 6-7: Scam Case RAG MCP

**Week 3: í†µí•© ë° í…ŒìŠ¤íŠ¸**
- Day 1-3: E2E í†µí•© í…ŒìŠ¤íŠ¸
- Day 4-5: Few-shot ì˜ˆì‹œ ìµœì í™”
- Day 6-7: ì„±ëŠ¥ íŠœë‹ ë° ë¬¸ì„œí™”

---

## ê²€ì¦ ë° ê±°ë²„ë„ŒìŠ¤

### ì„±ëŠ¥ í‰ê°€ ê³„íš

#### í‰ê°€ ì§€í‘œ

**1. Agentic Behavior í‰ê°€**
```
ë„êµ¬ ì„ íƒ ì í•©ì„± = (ì ì ˆí•œ ë„êµ¬ ì„ íƒ íšŸìˆ˜) / (ì „ì²´ ë„êµ¬ ì„ íƒ íšŸìˆ˜)
ëª©í‘œ: > 90%

ì˜ˆì‹œ:
- ì‹ ê·œ ë°œì‹ ìì¸ë° social_graph_mcp í˜¸ì¶œ â†’ ë¶€ì ì ˆ (0ì )
- URL ìˆëŠ”ë° threat_intelligence_mcp í˜¸ì¶œ â†’ ì ì ˆ (1ì )
```

**2. ë§¥ë½ ì´í•´ë„ í‰ê°€**
```
ë§¥ë½ ë°˜ì˜ìœ¨ = (ë§¥ë½ ê³ ë ¤ íŒë‹¨) / (ì „ì²´ íŒë‹¨)
ëª©í‘œ: > 85%

ì˜ˆì‹œ:
- A-1 + 5ë…„ ì´ë ¥ â†’ HIGH ì¡°ì • â†’ ë§¥ë½ ê³ ë ¤ (1ì )
- A-1 â†’ ë¬´ì¡°ê±´ CRITICAL â†’ ë§¥ë½ ë¬´ì‹œ (0ì )
```

**3. ì „í†µì  ì„±ëŠ¥ ì§€í‘œ**
```
F2-Score (Recall ìš°ì„ ): > 0.90
False Negative Rate: < 8%
False Positive Rate: < 5%
```

**4. ì‚¬ìš©ì ê²½í—˜**
```
ì„¤ëª… ì´í•´ë„: > 80% (ì‚¬ìš©ì ì„¤ë¬¸)
í‰ê·  ê°œì… íšŸìˆ˜: < 3íšŒ/ì¼
```

#### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

**Scenario Set 1: ë„êµ¬ ë§¹ì‹  ë°©ì§€**
```
Case 1: DB ì‹ ê³  + ì¥ê¸° ì´ë ¥
Input: "ì—„ë§ˆ ë²ˆí˜¸ ë°”ë€Œì—ˆì–´" + DB ì‹ ê³  ìˆìŒ + 5ë…„ ëŒ€í™”
Expected: HIGH (CRITICAL ì¡°ì •)
Metric: ë§¥ë½ ë°˜ì˜ ì—¬ë¶€

Case 2: ë² ì´ì¦ˆ ë‚®ìŒ + ì‚¬ê¸° ë§¥ë½
Input: "íˆ¬ì ìƒë‹´" + í™•ë¥  0.35 + ì²˜ìŒ ë³´ëŠ” ë²ˆí˜¸
Expected: HIGH (í™•ë¥  ë¬´ì‹œ)
Metric: ë§¥ë½ ìš°ì„  íŒë‹¨
```

**Scenario Set 2: ë„êµ¬ ì„ íƒ ì í•©ì„±**
```
Case 3: URL í¬í•¨ ë©”ì‹œì§€
Input: "íƒë°° ì¡°íšŒ http://bit.ly/xxx"
Expected Tools: entity_extractor_mcp, threat_intelligence_mcp
Metric: ë„êµ¬ ì„ íƒ ì í•©ì„±

Case 4: ê¸°ì¡´ ë°œì‹ ì ê¸ˆì „ ìš”êµ¬
Input: "ê¸‰í•˜ê²Œ ëˆ ì¢€..." + 3ë…„ ì´ë ¥
Expected Tools: social_graph_mcp, scam_case_rag_mcp
Metric: ë¶ˆí•„ìš”í•œ ë„êµ¬ í˜¸ì¶œ íšŒí”¼
```

---

### í’ˆì§ˆ ë³´ì¦ ê³„íš

#### Failure Handling

**1. ë„êµ¬ ì‹¤íŒ¨ ì‹œ**
```python
try:
    kisa_result = threat_intelligence_mcp(url)
except APITimeout:
    # Fallback: ë³´ìˆ˜ì  íŒë‹¨
    reasoning += "\n(KISA DB ì¡°íšŒ ì‹¤íŒ¨, ë³´ìˆ˜ì  íŒë‹¨ ì ìš©)"
    risk_adjustment += 0.1
except APIError:
    # ì•ˆì „í•œ ê¸°ë³¸ê°’
    kisa_result = {"has_reported": false, "note": "API ì˜¤ë¥˜"}
```

**2. ë‚®ì€ ì‹ ë¢°ë„ ì‹œ**
```python
if agent_confidence < 0.5:
    final_risk = "MEDIUM"  # ë³´ìˆ˜ì 
    reasoning += "\níŒë‹¨ ë¶ˆí™•ì‹¤, ì‚¬ìš©ì ì§ì ‘ í™•ì¸ ê¶Œì¥"
    recommended_action = "ë°œì‹ ìì—ê²Œ ì§ì ‘ ì „í™”í•˜ì—¬ í™•ì¸"
```

**3. ëª¨ìˆœëœ ì¦ê±° ì‹œ**
```python
if db_reported and sender_trust > 0.9:
    # ëª…ì‹œì  ëª¨ìˆœ ì²˜ë¦¬
    reasoning = """
    ëª¨ìˆœëœ ì¦ê±° ê°ì§€:
    - DB ì‹ ê³  ì´ë ¥ (ìœ„í—˜ ì¦ê±°)
    - ë†’ì€ ë°œì‹ ì ì‹ ë¢°ë„ (ì•ˆì „ ì¦ê±°)

    â†’ ë²ˆí˜¸ ì¬í™œìš© ë˜ëŠ” DB ì˜¤ë³´ ê°€ëŠ¥ì„±
    â†’ ì§ì ‘ í™•ì¸ ê°•ë ¥ ê¶Œì¥
    """
    final_risk = "HIGH"  # CRITICAL ëŒ€ì‹ 
```

---

### ì•ˆì „ì„± ë° í™˜ê° ì œì–´

#### RAG ê¸°ë°˜ ì¦ê±° ê²€ì¦

```python
# ìœ ì‚¬ ì‚¬ë¡€ ê²€ìƒ‰ìœ¼ë¡œ í™˜ê° ë°©ì§€
similar_cases = scam_case_rag_mcp(message)

if len(similar_cases) == 0:
    # ì¦ê±° ë¶€ì¡± â†’ ë³´ìˆ˜ì 
    reasoning += "\nìœ ì‚¬ ì‚¬ë¡€ ì—†ìŒ, ì‹ ì¤‘í•œ íŒë‹¨ í•„ìš”"
    confidence *= 0.8
else:
    # ì¦ê±° ê¸°ë°˜ íŒë‹¨
    scam_ratio = count_scam(similar_cases) / len(similar_cases)
    reasoning += f"\nìœ ì‚¬ ì‚¬ë¡€ {len(similar_cases)}ê±´ ì¤‘ ì‚¬ê¸° {scam_ratio:.0%}"
```

#### Safety Guardrail

```python
# ìœ í•´ ì‘ë‹µ ë°©ì§€
if contains_harmful_content(generated_message):
    return "ì ì ˆí•œ ì‘ë‹µì„ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê²½ì°°ì²­(182) ë¬¸ì˜ ê¶Œì¥"

# ê°œì¸ì •ë³´ ë…¸ì¶œ ë°©ì§€
generated_message = redact_pii(generated_message)
```

---

## Kanana í™œìš© ì „ëµ

### Kananaì˜ 3ê°€ì§€ ì—­í• 

#### 1. Brain (í•µì‹¬ ì¶”ë¡  ì—”ì§„)

```python
# ì „ì²´ íŒŒì´í”„ë¼ì¸ì„ ì£¼ë„
kanana_agent = KananaAgent(
    model="kanana-2.0",
    system_prompt=HYBRID_AGENT_PROMPT,
    tools=[
        context_analyzer_mcp,
        entity_extractor_mcp,
        threat_intelligence_mcp,
        social_graph_mcp,
        bayesian_calculator_mcp,
        scam_case_rag_mcp
    ],
    react_pattern=True
)

# ììœ¨ì  ì¶”ë¡  ë° í–‰ë™
result = kanana_agent.analyze(
    message=current_message,
    context=last_10_messages
)
```

**Kanana ì—­í• **:
- ë§¥ë½ ì´í•´ (ìµœê·¼ 10ê°œ ëŒ€í™” + í˜„ì¬ ë©”ì‹œì§€)
- ë„êµ¬ ì„ íƒ ë° ì‹¤í–‰ ìˆœì„œ ê²°ì •
- ë„êµ¬ ê²°ê³¼ ë¹„íŒì  í•´ì„
- ìµœì¢… ìœ„í—˜ë„ íŒë‹¨
- ì‚¬ìš©ì ì„¤ëª… ìƒì„±

#### 2. Tool (ì¼ë¶€ MCP ë‚´ë¶€ ë™ì‘)

```python
# Social Graph MCP ë‚´ë¶€ì—ì„œ Kanana ì‚¬ìš©
def social_graph_mcp(sender_id):
    conversation = get_history(sender_id)

    # Kananaë¡œ ì‹ ë¢°ë„ ë¶„ì„
    trust_result = kanana_mini.analyze(f"""
    ëŒ€í™” ì´ë ¥ ë¶„ì„:
    - ë©”ì‹œì§€ ìˆ˜: {len(conversation)}
    - ê¸°ê°„: {calculate_duration(conversation)}
    - ìµœê·¼ ëŒ€í™”: {conversation[-5:]}

    ì§ˆë¬¸: ì´ ë°œì‹ ìì˜ ì‹ ë¢°ë„ëŠ”? (0-1)
    """)

    return {
        "trust_score": trust_result.score,
        "reasoning": trust_result.reasoning
    }
```

**Kanana ì—­í• **:
- ëŒ€í™” ì´ë ¥ ë§¥ë½ ë¶„ì„
- í†¤ ì¼ê´€ì„± í‰ê°€
- ê°‘ì‘ìŠ¤ëŸ¬ìš´ ë³€í™” ê°ì§€

#### 3. UI Generator (ì‚¬ìš©ì ì¹œí™”ì  ì„¤ëª…)

```python
# ìµœì¢… íŒë‹¨ í›„ UI ìƒì„±
def generate_user_message(bayesian_result):
    ui_prompt = f"""
    ì „ë¬¸ê°€ íŒë‹¨ ê²°ê³¼ë¥¼ ì¼ë°˜ì¸ì´ ì´í•´í•  ìˆ˜ ìˆê²Œ ì„¤ëª…í•˜ì„¸ìš”.

    íŒë‹¨ ê²°ê³¼:
    {bayesian_result}

    ìš”êµ¬ì‚¬í•­:
    - ì „ë¬¸ ìš©ì–´ ìµœì†Œí™”
    - ì™œ ì´ë ‡ê²Œ íŒë‹¨í–ˆëŠ”ì§€ ëª…í™•íˆ
    - êµ¬ì²´ì  í–‰ë™ ì§€ì¹¨ ì œê³µ
    - ê³µí¬ ì¡°ì¥í•˜ì§€ ì•Šê¸°
    """

    return kanana.generate(ui_prompt)
```

**Kanana ì—­í• **:
- ê¸°ìˆ ì  íŒë‹¨ì„ ì¼ë°˜ ì–¸ì–´ë¡œ ë³€í™˜
- ì‚¬ìš©ì ë§ì¶¤ ì„¤ëª… ìƒì„±
- êµ¬ì²´ì  í–‰ë™ ì§€ì¹¨ ì œì•ˆ

---

### í•œêµ­ì–´ íŠ¹ì„± í™œìš©

#### ë³€ì¹™ í‘œê¸° ì²˜ë¦¬

```python
# Kananaì˜ í•œêµ­ì–´ ì´í•´ ëŠ¥ë ¥
examples = {
    "ê³µì¼ê³µ-1234-5678": "010-1234-5678",
    "ì´ë°±ë§Œì›": "2,000,000ì›",
    "ã…‹ã…‹ã…‹ ë†ë‹´ì´ì–Œ ã…ã…": "ë†ë‹´ íŒ¨í„´",
    "ì—„ë§ˆã…": "ì—„ë§ˆ" (ì˜¤íƒ€ ë³´ì •)
}
```

#### ë§¥ë½ ì´í•´

```python
# LLMë§Œ ê°€ëŠ¥í•œ ë§¥ë½ ë¶„ë¥˜
case_1 = {
    "message": "ë‹¹ë‡¨ 500ì›",
    "context": "ì•½êµ­ ëŒ€í™”",
    "category": "NORMAL"  # ì•½ êµ¬ë§¤
}

case_2 = {
    "message": "ë‹¹ë‡¨ë³‘ ì¹˜ë£Œ ì¤‘",
    "context": "ê±´ê°• ìƒë‹´",
    "category": "NORMAL"  # ìƒíƒœ ê³µìœ 
}

case_3 = {
    "message": "ë‹¹ë‡¨ì— ì¢‹ì€ 500ë§Œì› íˆ¬ì",
    "context": "ì²˜ìŒ ë³´ëŠ” ë²ˆí˜¸",
    "category": "C-1"  # íˆ¬ì ì‚¬ê¸°
}
```

---

## ê¸°ëŒ€ íš¨ê³¼

### ê²½ì§„ëŒ€íšŒ ì‹¬ì‚¬ ëŒ€ì‘

#### ì‹¬ì‚¬ í•­ëª©ë³„ ì˜ˆìƒ ì ìˆ˜

| í•­ëª© | ë°°ì  | ê¸°ì¡´ | ì œì•ˆ | ê°œì„  | ê·¼ê±° |
|------|------|------|------|------|------|
| **Agentic AI ì„¤ê³„** | 10 | 6 | **10** | +4 | ReAct íŒ¨í„´, ììœ¨ ë„êµ¬ ì„ íƒ |
| **Tool Use ì„¤ê³„** | 10 | 7 | **10** | +3 | 6ê°œ MCP ë„êµ¬, ëª…í™•í•œ I/O |
| **ê¸°ìˆ ì  íƒ€ë‹¹ì„±** | 10 | 6 | **9** | +3 | Kanana Agent í”„ë¡¬í”„íŠ¸ ìƒì„¸ |
| **ì„±ëŠ¥ í‰ê°€ ê³„íš** | 10 | 7 | **9** | +2 | Agentic Behavior ì¸¡ì • ì§€í‘œ |
| **Kanana í™œìš©** | 10 | 5 | **10** | +5 | Brain + Tool + UI 3ì—­í•  |
| **ì´ì ** | 50 | 31 | **48** | **+17** | |

#### ì‹¬ì‚¬ìœ„ì› ì„¤ë“ í¬ì¸íŠ¸

**1. Agentic AI ì„¤ê³„ (ë§Œì  ì „ëµ)**
```
"Kanana Agentê°€ ReAct íŒ¨í„´ìœ¼ë¡œ ììœ¨ ì¶”ë¡ :
1. Reasoning: ìƒí™© ë¶„ì„ ë° ë„êµ¬ ì„ íƒ ê³„íš
2. Action: í•„ìš”í•œ MCP ë„êµ¬ ì‹¤í–‰
3. Observation: ê²°ê³¼ ë¹„íŒì  í•´ì„
4. Loop or Decide: ì¶”ê°€ ì •ë³´ í•„ìš” ì‹œ ë°˜ë³µ, ì¶©ë¶„í•˜ë©´ íŒë‹¨

â†’ ë‹¨ìˆœ ë¶„ë¥˜ê°€ ì•„ë‹Œ 'ììœ¨ì  ì‚¬ê³  íë¦„' ì„¤ê³„"
```

**2. Tool Use ì„¤ê³„ (ë§Œì  ì „ëµ)**
```
"6ê°œ MCP ë„êµ¬, ê°ê° ëª…í™•í•œ I/O:
- entity_extractor_mcp(text) â†’ {entities: Dict}
- threat_intelligence_mcp(id, type) â†’ {has_reported: bool}
- social_graph_mcp(sender) â†’ {trust_score: float}

Kananaê°€ ìƒí™©ì— ë”°ë¼ ì„ íƒì  ì‹¤í–‰:
- URL ìˆìœ¼ë©´ â†’ threat_intelligence_mcp
- ì‹ ê·œ ë°œì‹ ì â†’ scam_case_rag_mcp
- ê¸°ì¡´ ê´€ê³„ â†’ social_graph_mcp"
```

**3. Kanana í™œìš© (ë§Œì  ì „ëµ)**
```
"KananaëŠ” ë‹¨ìˆœ ë„êµ¬ê°€ ì•„ë‹Œ í•µì‹¬ Brain:
1. ì „ì²´ íŒŒì´í”„ë¼ì¸ ì£¼ë„ (ReAct Loop)
2. ì¼ë¶€ MCP ë‚´ë¶€ ë™ì‘ (ì‹ ë¢°ë„ ë¶„ì„)
3. ì‚¬ìš©ì UI ìƒì„± (ì„¤ëª… ê°€ëŠ¥ì„±)

â†’ Kanana ì—†ì´ëŠ” ì‹œìŠ¤í…œ ì‘ë™ ë¶ˆê°€"
```

---

### ì‚¬ìš©ì ì¸¡ë©´

**1. ì •í™•ë„ í–¥ìƒ**
- False Negative: 18% â†’ <8% (ë§¥ë½ ê³ ë ¤)
- False Positive: 12% â†’ <5% (ë„êµ¬ ë§¹ì‹  ë°©ì§€)

**2. ì‹ ë¢°ë„ í–¥ìƒ**
- ì„¤ëª… ê°€ëŠ¥ì„± 40% ì¦ê°€
- "ì™œ ì•ˆì „/ìœ„í—˜í•œì§€" ëª…í™•í•œ ê·¼ê±° ì œì‹œ

**3. ìƒˆë¡œìš´ ì‚¬ê¸° ìœ í˜• ëŒ€ì‘**
- D-N ì¹´í…Œê³ ë¦¬ + RAGë¡œ ì‹ ê·œ íŒ¨í„´ ìë™ í•™ìŠµ
- AIê°€ ìœ ì‚¬ ì‚¬ë¡€ ì¶”ë¡ í•˜ì—¬ ëŒ€ì‘

---

### í”Œë«í¼/ì‚¬íšŒ ì¸¡ë©´

**1. ë²”ì£„ ì˜ˆë°© ìƒíƒœê³„**
- íƒì§€ëœ ì‚¬ê¸° â†’ RAG DB ì¶•ì  â†’ ì§‘ë‹¨ ì§€ì„±
- KISA/ê²½ì°°ì²­ ë°ì´í„° ê³µìœ 

**2. AI ì‹ ë¢°ì„± ì¦ëª…**
- "AIê°€ ì–´ë–»ê²Œ íŒë‹¨í–ˆëŠ”ê°€" íˆ¬ëª…í•˜ê²Œ ê³µê°œ
- Explainable AI ì‚¬ë¡€ ì œì‹œ

---

## ë¶€ë¡

### A. ê¸°ì¡´ ë°©ì‹ê³¼ì˜ ë¹„êµ

| ì¸¡ë©´ | Rule-Based | Bayesian | **Hybrid Agent** |
|------|------------|----------|------------------|
| **ìœ„í—˜ë„ ê³„ì‚°** | ê³ ì • ì„ê³„ê°’ | ë² ì´ì¦ˆ í™•ë¥  | AI ì¶”ë¡  |
| **ë§¥ë½ ë°˜ì˜** | ë¶ˆê°€ | ì œí•œì  | ì™„ì „ |
| **ë„êµ¬ ì‚¬ìš©** | ìˆœì°¨ ì‹¤í–‰ | ìˆœì°¨ ì‹¤í–‰ | ììœ¨ ì„ íƒ |
| **ì„¤ëª… ê°€ëŠ¥ì„±** | ë‚®ìŒ | ì¤‘ê°„ | ë†’ìŒ |
| **AI ì—­í• ** | ë³´ì¡° (30%) | ë³´ì¡° (50%) | **ì£¼ë„ (80%)** |
| **í™•ì¥ì„±** | ë‚®ìŒ | ì¤‘ê°„ | ë†’ìŒ |

### B. êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

**í•„ìˆ˜ (3ì£¼)**
- [ ] Kanana Agent Prompt ì„¤ê³„ (ReAct)
- [ ] Tool Selection Logic êµ¬í˜„
- [ ] 6ê°œ MCP Tool êµ¬í˜„
- [ ] E2E í†µí•© í…ŒìŠ¤íŠ¸
- [ ] Few-shot ì˜ˆì‹œ ìµœì í™”

**ê¶Œì¥ (ì¶”ê°€ 1ì£¼)**
- [ ] RAG DB í™•ì¥ (1,000ê±´ â†’ 10,000ê±´)
- [ ] Temperature Scaling íŒŒë¼ë¯¸í„° íŠœë‹
- [ ] ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ

**ì„ íƒ (ë³¸ì„  ì§„ì¶œ ì‹œ)**
- [ ] Multi-Agent í˜‘ì—… (Agent Aì™€ í†µì‹ )
- [ ] ë‹¤êµ­ì–´ ì§€ì› (ì˜ì–´, ì¤‘êµ­ì–´)
- [ ] ê²½ì°°ì²­ ìë™ ì‹ ê³  ì—°ë™

---

**ë¬¸ì„œ ì¢…ë£Œ**

**ì‘ì„±ì**: AI Agent Competition Team
**ìµœì¢… ê²€í† **: 2025-12-07
**ë²„ì „**: Hybrid Intelligent Agent 1.0
